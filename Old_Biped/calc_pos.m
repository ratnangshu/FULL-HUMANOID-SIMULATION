% Inputs -- r0 (right leg angles), t6 (a transform matrice), wl (state of which leg is swing -1 for right 1 for left)
% Outputs -- leg(leg coordi), foot(foot coordi), com(center of mass)

 function [leg,foot,com] = calc_pos(r0,t6,wl)

        t5 = t6*((inv([0 1 0 0;0 0 1 0;1 0 0 5;0 0 0 1]))*Rz(-r0(6)));
        t4 = t5*((inv([1 0 0 0;0 0 -1 0;0 1 0 0;0 0 0 1]))*Rz(-r0(5)));
        t3 = t4*((inv([1 0 0 15;0 1 0 0;0 0 1 0;0 0 0 1]))*Rz(-r0(4)));
        t2 = t3*((inv([1 0 0 15;0 1 0 0;0 0 1 0;0 0 0 1]))*Rz(-r0(3)));
        t1 = t2*((inv([1 0 0 0;0 0 1 0;0 -1 0 0;0 0 0 1]))*Rz(-r0(2)));
        t0 = t1*((inv([0 -1 0 0;0 0 -1 0;1 0 0 0;0 0 0 1]))*Rz(-r0(1)));




        %right leg ---------------------------------------------
        leg(:,1) = t1*([0;0;0;1]);
        leg(:,2) = t2*([0;0;0;1]);
        leg(:,3) = t3*([0;0;0;1]);
        leg(:,4) = t4*([0;0;0;1]);
        leg(:,5) = t5*([0;0;0;1]);
        leg(:,7) = t5*([0;0;5;1]);
        leg(:,8) = t6*([5;0;0;1]);
        leg(:,6) = t5*([0;0;-5;1]);

        com = t0*([wl*5;0;0;1]);

        %right foot-------------------------------------------------
        foot(:,1) = t6*([0;0;-4.5;1]);
        foot(:,2) = t6*([-10;0;-4.5;1]);
        foot(:,3) = t6*([-10;0;4.5;1]);
        foot(:,4) = t6*([0;0;4.5;1]);
        foot(:,5) = t6*([5;0;4.5;1]);
        foot(:,6) = t6*([5;0;-4.5;1]);
        foot(:,7) = t6*([0;0;-4.5;1]);
        foot(:,8) = t6*([0;0;4.5;1]);

 end
